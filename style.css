/* =====================================================================
|  CYBERPUNK 2027 THEME - COMPREHENSIVE STYLING SYSTEM
|  Author: Theme Developer
|  Version: 2.0
|  License: MIT
'===================================================================== */

/* Import Orbitron font for cyberpunk aesthetic */
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');

/* =====================================================================
|  TABLE OF CONTENTS
|  ─────────────────────────────────────────────────────────────────
|  1. ROOT & BASE VARIABLES
|  2. BODY & GLOBAL STYLES
|  3. LAYOUT SYSTEMS
|     3.1 Decker Layout (Desktop + Mobile)
|     3.2 Tyrell Layout (Desktop + Mobile)
|  4. COLOR SCHEMES
|     4.1 Neon Noir Theme + Scrollbar
|     4.2 Rust & Chrome Theme + Scrollbar
|  5. CHAT STYLES
|     5.1 Matrix Terminal Style (Desktop + Mobile)
|     5.2 Neural Network Style (Desktop + Mobile)
|  6. FUNCTIONAL COMPONENTS
|     6.1 Settings Page
|     6.2 Video Background System
|     6.3 Input Area & Forms
|     6.4 Animations & Effects
'===================================================================== */

/* =====================================================================
|  1. ROOT & BASE VARIABLES
|     Foundation variables - lowest specificity
'===================================================================== */

:root {
    --cp2027-font-primary: "JetBrains Maple Mono", 'Roboto', sans-serif;
    --cp2027-font-mono: "JetBrains Maple Mono", 'Fira Code', 'Courier New', monospace;
    --cp2027-font-cyberpunk: 'Orbitron', 'Exo 2', 'Roboto', sans-serif;
    --cp2027-transition-fast: all 0.2s ease-in-out;
    --cp2027-transition-medium: all 0.4s ease-in-out;
}

/* =====================================================================
|  2. BODY & GLOBAL STYLES
|     Core body styles - applied only when theme is active
'===================================================================== */

/* Apply theme variables to SillyTavern core variables - Base Level */
body.cp2027-active {
    /* Core text and background colors */
    --SmartThemeBodyColor: var(--cp2027-text-primary);
    --SmartThemeEmColor: var(--cp2027-text-emphasis);
    --SmartThemeUnderlineColor: var(--cp2027-text-underline);
    --SmartThemeQuoteColor: var(--cp2027-text-quote);

    /* Background colors */
    --SmartThemeBlurTintColor: var(--cp2027-blur-tint);
    --SmartThemeChatTintColor: var(--cp2027-chat-tint);
    --SmartThemeUserMesBlurTintColor: var(--cp2027-user-blur);
    --SmartThemeBotMesBlurTintColor: var(--cp2027-bot-blur);

    /* Borders and effects */
    --SmartThemeBorderColor: var(--cp2027-border-color);
    --SmartThemeShadowColor: var(--cp2027-shadow-color);

    /* Fonts */
    --mainFontFamily: var(--cp2027-font-primary);
    --monoFontFamily: var(--cp2027-font-mono);

    /* Set body background color */
    background-color: var(--cp2027-bg-dark);
    color: var(--cp2027-text-primary);
}

/* =====================================================================
|  3. LAYOUT SYSTEMS
|     Layout-specific styles - Medium specificity
'===================================================================== */

/* ---------------------------------------------------------------------
|  3.1 DECKER LAYOUT - Enhanced Default Layout (Less Intrusive)
'--------------------------------------------------------------------- */

/* Desktop Decker Layout */
body.cp2027-active.cp2027-layout-decker #top-bar {
    background: var(--cp2027-bg-medium);
    border-bottom: 2px solid var(--cp2027-primary);
    backdrop-filter: blur(10px);
}

body.cp2027-active.cp2027-layout-decker #left-nav-panel,
body.cp2027-active.cp2027-layout-decker #right-nav-panel {
    background: var(--cp2027-bg-medium);
    border: 1px solid var(--cp2027-border-color);
    backdrop-filter: blur(5px);
}

body.cp2027-active.cp2027-layout-decker .drawer-content {
    background: var(--cp2027-bg-medium);
}

/* Mobile Decker Layout */
@media screen and (max-width: 1000px) {
    body.cp2027-active.cp2027-layout-decker #top-bar {
        backdrop-filter: blur(5px);
    }
}

/* ---------------------------------------------------------------------
|  3.2 TYRELL LAYOUT - Vertical Navigation (Horizontal Enhancement)
'--------------------------------------------------------------------- */

/* Desktop Tyrell Layout */
body.cp2027-active.cp2027-layout-tyrell {
    --VerticalToolBarWidth: 80px;
}
body.cp2027-active.cp2027-layout-tyrell .ch_name{
    font-family: var(--cp2027-font-cyberpunk);
    color:var(--SmartThemeEmColor);
    font-weight: bold;
}
body.cp2027-active.cp2027-layout-tyrell .welcomeRecent .recentChatList .recentChat .chatNameContainer{
    font-family: var(--cp2027-font-cyberpunk);
    color: var(--SmartThemeEmColor);
    font-weight: bold;
    font-size: 12px;
}
body.cp2027-active.cp2027-layout-tyrell #top-bar {
    width: var(--VerticalToolBarWidth);
    background: #0c0c0c;
    border-left: 2px solid var(--cp2027-primary);
    writing-mode: vertical-rl;
    text-orientation: mixed;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px 10px;
    position: absolute;
    left: 0px;
    right: auto;
    height: 100dvh;
    backdrop-filter: blur(0px);
    box-shadow: none;
    mask-image: linear-gradient(to left, transparent 0px, rgba(0, 0, 0, 0.1) 20px, rgba(0, 0, 0, 0.3) 40px, rgba(0, 0, 0, 0.6) 60px, rgba(0, 0, 0, 0.8) 80px, black 100px) !important;
}

body.cp2027-active.cp2027-layout-tyrell #top-bar .top-bar-nav-buttons {
    flex-direction: column;
    gap: 15px;
    width: 100%;
    writing-mode: horizontal-tb;
}

body.cp2027-active.cp2027-layout-tyrell #top-bar .menu_button {
    width: 50px;
    height: 50px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid var(--cp2027-border-color);
    transition: var(--cp2027-transition-fast);
    writing-mode: horizontal-tb;
    text-orientation: upright;
}

body.cp2027-active.cp2027-layout-tyrell #top-bar .menu_button:hover {
    background: var(--cp2027-primary);
    color: var(--cp2027-bg-dark);
    box-shadow: var(--cp2027-glow-primary);
}

/* Side panels in Tyrell layout */
body.cp2027-active.cp2027-layout-tyrell #left-nav-panel,
body.cp2027-active.cp2027-layout-tyrell #right-nav-panel {
    border: 2px solid var(--cp2027-primary);
    border-radius: 12px;
    backdrop-filter: blur(15px);
    box-shadow: 0 10px 30px var(--cp2027-shadow-color);
    position: fixed;
    max-height: 100dvh;
    left: auto;
    right: 0;
    width: calc(100dvw - var(--sheldWidth) - 100px);
    background: color-mix(in srgb, var(--cp2027-bg-medium), transparent 30%);
    border: none;
    border-right: 4px solid var(--SmartThemeBorderColor);
    border-left: 4px solid var(--SmartThemeBorderColor);
}

body.cp2027-active.cp2027-layout-tyrell #top-settings-holder {
    display: flex;
    margin: 10px auto;
    justify-content: center;
    z-index: 3005;
    position: absolute;
    flex-direction: column;
    width: var(--VerticalToolBarWidth);
    gap: 30px;
    height: auto;
}

body.cp2027-active.cp2027-layout-tyrell .drawer-icon.closedIcon:hover {
    opacity: 1;
    transform: scale(1.12) translateX(4px);
}

body.cp2027-active.cp2027-layout-tyrell .drawer-icon.closedIcon {
    opacity: 0.5;
    transition: all var(--animation-duration-2x);
}

body.cp2027-active.cp2027-layout-tyrell .drawer-icon {
    display: inline-block;
    cursor: pointer;
    font-size: calc(var(--mainFontSize) * 1.4);
    padding: 1px 3px;
    text-shadow: 0 0 28px var(--cp2027-primary);
    color: var(--cp2027-primary);
}

/* Tyrell布局下的drawer-content基础定位 - 适用于所有菜单 */

body.cp2027-active.cp2027-layout-tyrell .drawer-content {
    background-color: rgba(0, 0, 0, 0.68);
    color: var(--SmartThemeBodyColor);
    border-radius: 0 0 15px 15px;
    padding: 15px;
    border: none;
    min-width: calc(100vw - var(--sheldWidth) - 100px);
    min-width: calc(100dvw - var(--sheldWidth) - 100px);
    width: calc(100vw - var(--sheldWidth) - 100px);
    width: calc(100dvw - var(--sheldWidth) - 100px);
    overflow-y: hidden;
    max-height: calc(100vh - calc(var(--topBarBlockSize) + var(--bottomFormBlockSize)));
    max-height: calc(100dvh - calc(var(--topBarBlockSize) + var(--bottomFormBlockSize)));
    display: none;
    position: fixed;
    top: 0;
    left: auto;
    right: 0;
    margin: 0 auto;
    height: 0;
    backdrop-filter: blur(calc(var(--SmartThemeBlurStrength)));
    -webkit-backdrop-filter: blur(calc(var(--SmartThemeBlurStrength)));
    z-index: 1000 !important;
    transition-property: height, display;
    transition-duration: var(--animation-duration-2x);
    transition-timing-function: ease-in-out;
    transition-behavior: allow-discrete;
    border-top: 3px solid var(--SmartThemeBorderColor);
    border-bottom: 6px solid var(--SmartThemeBorderColor);
}



/* openDrawer状态只控制显示和滚动 */
body.cp2027-active.cp2027-layout-tyrell .drawer-content.openDrawer {
    display: block;
    height: auto;
    height: calc-size(auto, size);
    overflow-y: auto;

    @supports selector(::-webkit-scrollbar-thumb) {
        animation: hide-scroll var(--animation-duration-2x) backwards;
    }

    @starting-style {
        height: 0;
    }
}


body.cp2027-active.cp2027-layout-tyrell .welcomeRecent .recentChatList {
    display: grid;
    width: 75%;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    column-gap: 15px;
    position: relative;
}

body.cp2027-active.cp2027-layout-tyrell .welcomePanel {
    display: flex;
    flex-direction: column;
    gap: 5px;
    padding: 10px;
    width: 100%;
    margin-bottom: auto;
}

body.cp2027-active.cp2027-layout-tyrell .welcomePanel .recentChatsTitle {
    flex-grow: 1;
    font-size: calc(var(--mainFontSize) * 1.15);
    font-weight: 600;
    padding-left: 0px;
}

body.cp2027-active.cp2027-layout-tyrell .welcomeRecent .recentChatList .recentChat.hidden {
    display: none !important;
}

body.cp2027-active.cp2027-layout-tyrell .welcomeRecent .recentChatList .showMoreChats {
    align-self: center;
    position: absolute;
    top: 0px;
    left: 102%;
    background-color: rgba(0, 0, 0, 0.5);
    box-shadow: 0 0 10px 3px var(--SmartThemeEmColor);
}

body.cp2027-active.cp2027-layout-tyrell #sheld {
    display: flex;
    flex-direction: column;
    height: 100dvh;
    overflow-x: hidden;
    position: absolute;
    left: 80px;
    margin: 0 10px;
    z-index: 30;
    min-height: 100px;
    min-width: 100px;
    width: var(--sheldWidth);
    top: 10px;
}

body.cp2027-active.cp2027-layout-tyrell #extensions_settings,
body.cp2027-active.cp2027-layout-tyrell #extensions_settings2 {
    width: 100%;
    /*! display: block; */
    flex: unset;
}

body.cp2027-active.cp2027-layout-tyrell #send_textarea {
    background: rgba(0, 0, 0, 0.5);
    color: var(--cp2027-text-primary);
}

body.cp2027-active.cp2027-layout-tyrell #send_textarea:hover {
    /* 预留hover效果 - 可以添加边框或背景变化等效果 */
    border-color: rgba(0, 255, 221, 0.5);
}

body.cp2027-active.cp2027-layout-tyrell #send_form {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    width: 100%;
    margin: 0 auto 0 auto;
    border-top: 4px solid var(--SmartThemeBlurTintColor);
    border-radius: 0 0 10px 10px;
    background-color: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(var(--SmartThemeBlurStrength));
    padding: 10px;
    box-shadow: 0 0 3px var(--SmartThemeBlurTintColor);
    transition: all 0.3s ease;
}

body.cp2027-active.cp2027-layout-tyrell #cyberpunk_bg {
    background-repeat: no-repeat !important;
    background-attachment: fixed !important;
    background-size: cover !important;
    position: fixed !important;
    width: calc(100dvw - var(--sheldWidth) - 100px) !important;
    height: 100% !important;
    transition: background-image var(--animation-duration-3x) ease-in-out, opacity 0.8s ease-in-out !important;
    background-position: center !important;
    left: auto !important;
    right: 0 !important;
    z-index: 0 !important;
    opacity: 1 !important;
    top: 0 !important;
    mask-image: linear-gradient(to right, transparent 0px, rgba(0, 0, 0, 0.1) 20px, rgba(0, 0, 0, 0.3) 40px, rgba(0, 0, 0, 0.6) 60px, rgba(0, 0, 0, 0.8) 80px, black 100px) !important;
    filter: contrast(1.2);
}

/* Mobile Tyrell Layout */
@media screen and (max-width: 1000px) {
    /* body.cp2027-active.cp2027-layout-tyrell {
        --VerticalToolBarWidth: 60px;
    } */

    body.cp2027-active.cp2027-layout-tyrell #top-bar {
        width: 100dvw;
        background: #0c0c0c;
        border-left: 2px solid var(--cp2027-primary);
        /* writing-mode: vertical-rl;
        text-orientation: mixed;
        display: flex;
        flex-direction: row;
        align-items: center;
        padding: 20px 10px;
        position: absolute;
        left: 0px;
        right: auto; */
        height: var(--topBarBlockSize);
        backdrop-filter: blur(0px);
        box-shadow: none;
        mask-image: linear-gradient(to bottom, black 0%, rgba(0, 0, 0, 0.8) 30%, rgba(0, 0, 0, 0.6) 50%, rgba(0, 0, 0, 0.3) 70%, rgba(0, 0, 0, 0.1) 85%, transparent 100%) !important;
    }

    body.cp2027-active.cp2027-layout-tyrell #top-settings-holder {
        display: flex;
        margin: auto auto;
        justify-content: center;
        z-index: 3005;
        position: absolute;
        flex-direction: row;
        width: 100dvw;
        gap: 0px;
        height: var(--topBarBlockSize);
    }

    body.cp2027-active.cp2027-layout-tyrell #sheld {
        display: flex;
        flex-direction: column;
        height: calc(100dvh - var(--topBarBlockSize));
        overflow-x: hidden;
        margin: 0 auto;
        z-index: 30;
        min-height: 100px;
        min-width: 100px;
        width: 100vw !important;
        width: 100dvw !important;
        left: 0 !important;
        position: relative !important;
        top: var(--topBarBlockSize);
    }

    /* body.cp2027-active.cp2027-layout-tyrell .welcomePanel .recentChatsTitle {
        flex-grow: 1;
        font-size: calc(var(--mainFontSize) * 0);
        font-weight: 600;
        padding-left: 0px;
    } */

    body.cp2027-active.cp2027-layout-tyrell .drawer-content {
        min-width: unset;
        width: 100dvw;
        max-height: calc(100vh - 45px) !important;
        max-height: calc(100dvh - 45px) !important;
        position: fixed;
        left: 0;
        top: 5px;
        /* border: 1px solid var(--SmartThemeBorderColor); */
        width: 100dvw !important;
        margin: 0 auto;
        max-width: 100dvw;
        left: 0 !important;
        resize: none !important;
        top: var(--topBarBlockSize);


    }


    /* 修复移动端form_sheld显示问题 */
    body.cp2027-active #form_sheld {
        position: sticky !important;
        bottom: 0 !important;
        background: var(--SmartThemeBlurTintColor) !important;
        backdrop-filter: blur(var(--SmartThemeBlurStrength)) !important;
        padding-bottom: max(env(safe-area-inset-bottom), 8px) !important;
        z-index: 1000 !important;
        width: 100% !important;
        margin: 0 !important;
    }

    /* 确保send_form在移动端正确显示 */
    body.cp2027-active #send_form {
        border-top: 1px solid var(--SmartThemeBorderColor) !important;
        border-radius: 0 !important;
        margin: 0 !important;
        background: var(--SmartThemeBlurTintColor) !important;
        backdrop-filter: blur(10px) !important;
        -webkit-backdrop-filter: blur(10px) !important;
        border: 1px solid var(--cp2027-border-color) !important;
        box-shadow: 0 0 20px var(--cp2027-shadow-color) !important;
    }
}

/* =====================================================================
|  4. COLOR SCHEMES
|     Theme-specific color variables and scrollbars - Higher specificity
'===================================================================== */

/* ---------------------------------------------------------------------
|  4.1 NEON NOIR THEME + SCROLLBAR
'--------------------------------------------------------------------- */

/* Neon Noir Color Variables */
body.cp2027-active.cp2027-style-noir {
    --cp2027-primary: #00ffff;
    --cp2027-secondary: #ff00ff;
    --cp2027-accent: #ffff00;
    --cp2027-bg-dark: #0a0a1a;
    --cp2027-bg-medium: #1a1a3a;
    --cp2027-bg-light: #2a2a5a;
    --cp2027-text-primary: #e0f0ff;
    --cp2027-text-secondary: #b0d0ff;
    --cp2027-text-emphasis: #00ffdd;
    --cp2027-text-quote: #ffdd00;
    --cp2027-text-underline: #ff44dd;
    --cp2027-border-color: color-mix(in srgb, var(--cp2027-primary) 30%, transparent);
    --cp2027-blur-tint: color-mix(in srgb, var(--cp2027-bg-medium) 80%, var(--cp2027-primary) 20%);
    --cp2027-chat-tint: color-mix(in srgb, var(--cp2027-bg-dark) 85%, var(--cp2027-primary) 15%);
    --cp2027-user-blur: color-mix(in srgb, var(--cp2027-secondary) 15%, var(--cp2027-bg-dark) 85%);
    --cp2027-bot-blur: color-mix(in srgb, var(--cp2027-primary) 15%, var(--cp2027-bg-dark) 85%);
    --cp2027-shadow-color: color-mix(in srgb, var(--cp2027-primary) 30%, black 70%);
    --cp2027-glow-primary: 0 0 5px var(--cp2027-primary), 0 0 10px var(--cp2027-primary);
}

/* Neon Noir Scrollbar */
body.cp2027-active.cp2027-style-noir ::-webkit-scrollbar {
    width: 2px !important;
}

body.cp2027-active.cp2027-style-noir ::-webkit-scrollbar-track {
    background: none !important;
}

body.cp2027-active.cp2027-style-noir ::-webkit-scrollbar-thumb {
    background-color: var(--cp2027-primary) !important;
    border: none !important;
    box-shadow: none !important;
    background-clip: padding-box !important;
    border-radius: 0 !important;
}

body.cp2027-active.cp2027-style-noir ::-webkit-scrollbar-thumb:hover {
    background-color: var(--cp2027-accent) !important;
}

/* ---------------------------------------------------------------------
|  4.2 RUST & CHROME THEME + SCROLLBAR
'--------------------------------------------------------------------- */

/* Rust & Chrome Color Variables */
body.cp2027-active.cp2027-style-rust {
    --cp2027-primary: #e07b42;
    --cp2027-secondary: #c0c0c0;
    --cp2027-accent: #f0a050;
    --cp2027-bg-dark: #2a2520;
    --cp2027-bg-medium: #4a4038;
    --cp2027-bg-light: #6a5a4d;
    --cp2027-text-primary: #f5e5d5;
    --cp2027-text-secondary: #d5c5b5;
    --cp2027-text-emphasis: #ff9955;
    --cp2027-text-quote: #ffcc44;
    --cp2027-text-underline: #cc8866;
    --cp2027-border-color: color-mix(in srgb, var(--cp2027-primary) 40%, transparent);
    --cp2027-blur-tint: color-mix(in srgb, var(--cp2027-bg-medium) 80%, var(--cp2027-primary) 20%);
    --cp2027-chat-tint: color-mix(in srgb, var(--cp2027-bg-dark) 85%, var(--cp2027-primary) 15%);
    --cp2027-user-blur: color-mix(in srgb, var(--cp2027-secondary) 20%, var(--cp2027-bg-dark) 80%);
    --cp2027-bot-blur: color-mix(in srgb, var(--cp2027-primary) 20%, var(--cp2027-bg-dark) 80%);
    --cp2027-shadow-color: color-mix(in srgb, var(--cp2027-primary) 40%, black 60%);
    --cp2027-glow-primary: none;
}

/* Rust & Chrome Scrollbar */
body.cp2027-active.cp2027-style-rust ::-webkit-scrollbar {
    width: 3px !important;
}

body.cp2027-active.cp2027-style-rust ::-webkit-scrollbar-track {
    background: rgba(74, 64, 56, 0.3) !important;
}

body.cp2027-active.cp2027-style-rust ::-webkit-scrollbar-thumb {
    background-color: var(--cp2027-primary) !important;
    border: none !important;
    box-shadow: none !important;
    background-clip: padding-box !important;
    border-radius: 2px !important;
}

body.cp2027-active.cp2027-style-rust ::-webkit-scrollbar-thumb:hover {
    background-color: var(--cp2027-accent) !important;
}

/* Layout-Specific Scrollbar Overrides */
body.cp2027-active.cp2027-layout-decker ::-webkit-scrollbar {
    width: 3px !important;
}

body.cp2027-active.cp2027-layout-tyrell ::-webkit-scrollbar {
    width: 2px !important;
}

/* Mobile Scrollbar Overrides */
@media (max-width: 1000px) {

    body.cp2027-active ::-webkit-scrollbar,
    body.cp2027-active.cp2027-style-noir ::-webkit-scrollbar,
    body.cp2027-active.cp2027-style-rust ::-webkit-scrollbar {
        width: 1px !important;
    }

    /* 全局移动端form_sheld修复 - 适用于所有布局 */
    body.cp2027-active #form_sheld {
        position: sticky !important;
        bottom: 0 !important;
        background: none !important;
        backdrop-filter: blur(var(--SmartThemeBlurStrength)) !important;
        -webkit-backdrop-filter: blur(var(--SmartThemeBlurStrength)) !important;
        padding-bottom: max(env(safe-area-inset-bottom), 8px) !important;
        z-index: 1000 !important;
        width: 100% !important;
        margin: 0 !important;
        border-top: 1px solid var(--SmartThemeBorderColor) !important;
    }

    /* 确保chat区域为form_sheld留出空间 */
    body.cp2027-active #chat {
        max-height: calc(100vh - var(--topBarBlockSize) - var(--bottomFormBlockSize) - max(env(safe-area-inset-bottom), 8px)) !important;
        max-height: calc(100dvh - var(--topBarBlockSize) - var(--bottomFormBlockSize) - max(env(safe-area-inset-bottom), 8px)) !important;
    }

    /* 移动端send_form样式优化 */
    body.cp2027-active #send_form {
        border-radius: 0 !important;
        margin: 0 !important;
        width: 100% !important;
        background: rgba(0, 0, 0, 0.7) !important;
        backdrop-filter: blur(10px) !important;
        -webkit-backdrop-filter: blur(10px) !important;
        border: 1px solid var(--cp2027-border-color) !important;
        border-top: 3px solid var(--SmartThemeBorderColor) !important;
        box-shadow: 0 0 20px var(--cp2027-shadow-color) !important;
        border-radius: 0 0 15px 15px !important;
    }
}

/* =====================================================================
|  5. CHAT STYLES
|     Specialized chat appearance modes - Highest component specificity
'===================================================================== */

/* ---------------------------------------------------------------------
|  5.1 MATRIX TERMINAL STYLE (Desktop + Mobile)
'--------------------------------------------------------------------- */

/* Matrix Style Base */
body.cp2027-active.matrixstyle #chat {
    background: #000000;
    font-family: var(--cp2027-font-mono);
    color: #00ff41;
    padding: 10px;
    overflow-x: hidden;
    overflow-y: clip;
}

body.cp2027-active.matrixstyle .mes {
    background: none;
    border: 1px solid #00ff41;
    border-radius: 0;
    margin: 5px 0;
    padding: 10px;
    box-shadow: 0 0 5px rgba(0, 255, 65, 0.3);
    font-family: var(--cp2027-font-mono);
}

body.cp2027-active.matrixstyle .mes .name {
    color: #41ff00;
    font-weight: bold;
    text-transform: uppercase;
}

body.cp2027-active.matrixstyle .mes .avatar {
    display: none;
}

/* Matrix Scrollbar */
body.cp2027-active.matrixstyle ::-webkit-scrollbar {
    width: 8px !important;
}

body.cp2027-active.matrixstyle ::-webkit-scrollbar-track {
    background: #000000 !important;
}

body.cp2027-active.matrixstyle ::-webkit-scrollbar-thumb {
    background: #00ff41 !important;
    border: none !important;
    box-shadow: none !important;
    background-clip: padding-box !important;
    border-radius: 0 !important;
}

body.cp2027-active.matrixstyle ::-webkit-scrollbar-thumb:hover {
    background: #41ff00 !important;
}

/* Matrix Mobile Styles */
@media (max-width: 1000px) {
    body.cp2027-active.matrixstyle #chat {
        padding: 5px;
    }

    body.cp2027-active.matrixstyle .mes {
        margin: 3px 0;
        padding: 8px;
    }
}

/* ---------------------------------------------------------------------
|  5.2 NEURAL NETWORK STYLE (Desktop + Mobile)
'--------------------------------------------------------------------- */

/* Neural Style Base */
body.cp2027-active.neuralstyle #chat {
    background: none;
    font-family: var(--cp2027-font-primary);
    color: #e0f0ff;
    padding: 15px;
    backdrop-filter: none;
    width: 100%;
    overflow-x: hidden;
    overflow-y: auto;
}

body.cp2027-active.neuralstyle #chat .mes {
    background: linear-gradient(135deg,
            rgba(0, 255, 255, 0.08) 0%,
            rgba(255, 0, 255, 0.08) 100%);
    margin: 15px 0;
    padding: 15px;
    position: relative;
    word-wrap: break-word;
    backdrop-filter: saturate(4)blur(14px)brightness(0.4);
    box-shadow: inset 0 0 30px 10px rgb(0 0 0 / 64%), 0 0 10px 5px rgba(98, 70, 173, 0.5);
    clip-path: polygon(0 0, 100% 0, 100% calc(100% - 40px), calc(100% - 40px) 100%, 0 100%);
    /*! border: 2px solid rgba(0, 0, 0, 0.57); */
    border-left: 6px solid var(--cp2027-primary);
    border-right: 6px solid var(--cp2027-primary);
}

body.cp2027-active.neuralstyle #chat .mes .avatar {
    width: 70px;
    height: 70px;
    border: none;
}

body.cp2027-active.neuralstyle #chat .mes.user_mes {
    background: linear-gradient(135deg,
            rgba(255, 0, 255, 0.08) 0%,
            rgba(0, 255, 255, 0.08) 100%);
    border-color: rgba(255, 0, 255, 0.3);
    margin-left: auto;
    margin-right: 70px;
    margin-left: 0;
    max-width: calc(100% - 80px);
}

body.cp2027-active.neuralstyle #chat .mes.user_mes .avatar {
    left: auto;
    right: -60px;
}

body.cp2027-active.neuralstyle #chat .mes .name {
    color: #00ffdd;
    font-weight: bold;
    text-shadow: 0 0 10px rgba(0, 255, 221, 0.5);
    margin-bottom: 8px;
}

body.cp2027-active.neuralstyle .welcomeRecent .recentChatList .recentChat {
    display: flex;
    flex-direction: row;
    align-items: center;
    padding: 15px 10px;
    cursor: pointer;
    gap: 10px;
    border: 1px solid rgba(0, 0, 0, 0.57);
    background: linear-gradient(135deg,
            rgba(0, 255, 255, 0.05) 0%,
            rgba(255, 0, 255, 0.05) 100%);
    backdrop-filter: saturate(4)blur(10px)brightness(0.7);
    margin-bottom: 12px;
    box-shadow: inset 0 0 30px 5px rgba(4, 3, 33, 0.77), 0 0 10px 4px rgba(98, 70, 173, 0.3);
    clip-path: polygon(0 0, 100% 0, 100% calc(100% - 15px), calc(100% - 15px) 100%, 0 100%);
    transition: all 0.3s ease;
    border-radius: 0px;
    border-bottom: 2px solid var(--cp2027-secondary);
}

body.cp2027-active.neuralstyle .welcomeRecent .recentChatList .recentChat:hover {
    box-shadow: inset 0 0 30px 5px rgba(4, 3, 33, 0.77), 0 0 15px 6px #1fe1f5;
    transform: translateY(-5px);
    background: linear-gradient(135deg,
            rgba(0, 255, 255, 0.15) 0%,
            rgba(255, 0, 255, 0.15) 100%);
}

body.cp2027-active.neuralstyle .welcomePanel .welcomeHeaderTitle {
    display: none;
}

/* Neural Scrollbar */
body.cp2027-active.neuralstyle ::-webkit-scrollbar {
    width: 2px !important;
}

body.cp2027-active.neuralstyle ::-webkit-scrollbar-track {
    background: none !important;
}

body.cp2027-active.neuralstyle ::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg,
            rgba(0, 255, 255, 0.6) 0%,
            rgba(255, 0, 255, 0.6) 100%) !important;
    border: none !important;
    box-shadow: none !important;
    background-clip: padding-box !important;
    border-radius: 0 !important;
}

body.cp2027-active.neuralstyle ::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg,
            rgba(0, 255, 255, 0.8) 0%,
            rgba(255, 0, 255, 0.8) 100%) !important;
}

/* Neural Mobile Styles */
@media (max-width: 1000px) {
    body.cp2027-active.neuralstyle #chat .mes .avatar {
        left: -45px;
        width: 35px;
        height: 35px;
        display: none;
    }

    body.cp2027-active.neuralstyle #chat .mes.user_mes {
        margin-right: 50px;
        margin-left: 0;
    }

    body.cp2027-active.neuralstyle #chat .mes.user_mes .avatar {
        right: -40px;
    }
}

/* =====================================================================
|  6. FUNCTIONAL COMPONENTS
|     Specific feature styling - Highest specificity when needed
'===================================================================== */

/* ---------------------------------------------------------------------
|  6.1 SETTINGS PAGE
'--------------------------------------------------------------------- */

/* Settings Panel Styling - Applied regardless of theme active state */
#cyberpunk2027-theme-settings {
    font-family: var(--cp2027-font-primary);
}

#cyberpunk2027-theme-settings .inline-drawer-header {
    background: linear-gradient(135deg, #1a1a3a 0%, #2a2a5a 100%);
    border: 1px solid #004dcc;
    border-radius: 8px 8px 0 0;
    color: #00ffff;
    padding: 12px 16px;
    font-weight: bold;
    text-shadow: 0 0 5px rgba(0, 255, 255, 0.5);
}

.cyberpunk-settings-row {
    margin-bottom: 15px;
    padding: 10px;
    border-radius: 6px;
    background: rgba(26, 26, 58, 0.3);
    border-left: 3px solid #004dcc;
}

.cyberpunk-setting-label {
    min-width: 120px;
    font-weight: 600;
    color: #00ffdd;
    display: flex;
    align-items: center;
}

.cyberpunk-select {
    min-width: 300px !important;
    width: auto !important;
    max-width: 500px;
    font-size: 14px !important;
    font-family: 'Segoe UI', 'Roboto', sans-serif !important;
    font-weight: 500;
    background: linear-gradient(135deg, #1a2240 0%, #2a3450 100%) !important;
    color: #e0f0ff !important;
    border: 2px solid #004dcc !important;
    border-radius: 6px !important;
    padding: 8px 12px !important;
    transition: all 0.3s ease;
    cursor: pointer;
}

.cyberpunk-select:hover {
    background: linear-gradient(135deg, #2a3450 0%, #3a4560 100%) !important;
    border-color: #00ffff !important;
    box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
}

.cyberpunk-select:focus {
    outline: none !important;
    border-color: #00ffff !important;
    box-shadow: 0 0 15px rgba(0, 255, 255, 0.5);
}

.cyberpunk-select option {
    background: #1a2240 !important;
    color: #e0f0ff !important;
    padding: 8px !important;
    font-size: 14px !important;
    font-weight: 500;
}

.cyberpunk-select option:hover,
.cyberpunk-select option:checked {
    background: #004dcc !important;
    color: #ffffff !important;
}

.cyberpunk-main-toggle {
    display: flex;
    align-items: center;
    gap: 10px;
}

.cyberpunk-main-toggle input[type="checkbox"] {
    width: 20px;
    height: 20px;
    accent-color: #00ffff;
}

.cyberpunk-toggle-text {
    font-size: 16px;
    font-weight: 600;
    color: #00ffdd;
    text-shadow: 0 0 3px rgba(0, 255, 221, 0.5);
}

.cyberpunk-description {
    margin-top: 8px;
    font-style: normal;
}

.cyberpunk-description small {
    color: #b0d0ff;
    font-size: 11px;
    line-height: 1.4;
}

.cyberpunk-info-section {
    background: rgba(15, 21, 48, 0.6) !important;
    border-left-color: #ffdd00 !important;
    margin-top: 20px;
}

.cyberpunk-config-section {
    background: rgba(15, 21, 48, 0.8) !important;
    border-left-color: #00ffdd !important;
    margin-top: 20px;
}

.cyberpunk-theme-config {
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
    overflow-x: hidden;
}

.cyberpunk-config-header {
    color: #00ffdd;
    margin-bottom: 15px;
    font-size: 17px;
    text-shadow: 0 0 5px rgba(0, 255, 221, 0.5);
    text-align: left;
    width: 100%;
    box-sizing: border-box;
    border-bottom: 3px solid rgba(0, 0, 0, 0.07);
    padding-bottom: 8px;
    word-wrap: break-word;
}

.cyberpunk-config-header strong {
    text-shadow: 0 0 10px rgba(0, 255, 221, 0.5);
}

.cyberpunk-config-controls {
    display: flex;
    flex-direction: column;
    gap: 20px;
    margin-bottom: 15px;
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
    overflow-x: hidden;
}

/* =====================================================================
|  改进的响应式控制组布局 - 修复小屏幕溢出问题
'===================================================================== */

/* 重构控制组布局 - 使用更灵活的flexbox */
.cyberpunk-control-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 12px;
    background: rgba(26, 34, 64, 0.4);
    border-radius: 8px;
    border: 1px solid rgba(0, 255, 221, 0.3);
    margin-bottom: 10px;
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
    position: relative;
    overflow: hidden;
    /* 防止内容溢出 */
}

/* 控制标签样式 */
.cyberpunk-control-label {
    font-weight: 600;
    color: #00ffdd;
    font-size: 14px;
    text-shadow: 0 0 3px rgba(0, 255, 221, 0.3);
    margin-bottom: 4px;
    flex-shrink: 0;
}

/* 控制包装器 - 水平布局输入控件 */
.cyberpunk-control-wrapper {
    display: flex;
    align-items: center;
    gap: 8px;
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
    min-height: 32px;
    overflow: hidden;
    /* 防止内容溢出容器 */
}

/* 隐藏滑块控件，只使用数字输入 */
.cyberpunk-slider {
    display: none !important;
}

/* 数字输入框 */
.cyberpunk-number-input {
    width: 80px;
    min-width: 80px;
    max-width: 100px;
    padding: 6px 8px;
    border: 1px solid rgba(0, 255, 221, 0.3);
    border-radius: 4px;
    background: rgba(26, 34, 64, 0.6);
    color: #e0f0ff;
    font-size: 13px;
    text-align: center;
    flex-shrink: 0;
    box-sizing: border-box;
}

/* 单位标签 */
.cyberpunk-unit {
    font-size: 12px;
    color: #b0d0ff;
    min-width: 20px;
    text-align: center;
    flex-shrink: 0;
}

/* 重置按钮样式改进 */
.cyberpunk-reset-btn {
    width: 32px;
    height: 32px;
    min-width: 32px;
    padding: 4px;
    background: rgba(26, 34, 64, 0.6);
    border: 1px solid rgba(0, 255, 221, 0.3);
    border-radius: 4px;
    color: #00ffdd;
    cursor: pointer;
    font-size: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: all 0.3s ease;
    position: absolute;
    top: 8px;
    right: 8px;
}

.cyberpunk-reset-btn:hover {
    background: rgba(0, 255, 221, 0.2);
    border-color: #00ffff;
    transform: scale(1.05);
}

/* 为重置按钮留出空间 */
.cyberpunk-control-group:has(.cyberpunk-reset-btn) .cyberpunk-control-wrapper {
    padding-right: 40px;
}

.cyberpunk-value-display {
    min-width: 35px;
    text-align: center;
    font-weight: 600;
    color: #ffffff;
    font-size: 12px;
    background: rgba(0, 255, 221, 0.2);
    padding: 4px 8px;
    border-radius: 4px;
    border: 1px solid rgba(0, 255, 221, 0.4);
}

.cyberpunk-config-details {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-top: 15px;
}

.cyberpunk-config-item {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 15px;
    background: rgba(42, 42, 90, 0.3);
    border-radius: 8px;
    border: 1px solid rgba(0, 255, 221, 0.2);
    transition: all 0.3s ease;
}

.cyberpunk-config-item:hover {
    background: rgba(42, 42, 90, 0.5);
    border-color: rgba(0, 255, 221, 0.4);
    box-shadow: 0 0 8px rgba(0, 255, 221, 0.4);
    transform: scale(1.05);
}

.cyberpunk-config-note {
    margin-top: 8px;
    padding: 8px;
    background: rgba(15, 21, 48, 0.4);
    border-radius: 4px;
    border-left: 3px solid #ffdd00;
    word-wrap: break-word;
}

.cyberpunk-config-note small {
    color: #ffeeaa;
    font-size: 11px;
    line-height: 1.4;
}

#cyberpunk2027-theme-settings {
    max-width: 100%;
    overflow-x: hidden;
    box-sizing: border-box;
}

#cyberpunk2027-theme-settings .inline-drawer-content {
    max-width: 100%;
    overflow-x: hidden;
    box-sizing: border-box;
}

#cyberpunk2027-theme-settings .cyberpunk-select {
    min-width: 0 !important;
    width: 100% !important;
    max-width: 100% !important;
    font-size: 14px !important;
    transform: scale(1) !important;
    box-sizing: border-box;
}

#cyberpunk2027-theme-settings .cyberpunk-select option {
    font-size: 14px !important;
}

/* 响应式断点 - 更多层级的适配 */

/* 中等屏幕 (典型Tyrell主题宽度) */
@media (max-width: 1400px) {
    .cyberpunk-control-group {
        padding: 10px;
    }

    .cyberpunk-number-input {
        width: 75px;
        min-width: 75px;
    }
}

/* 小屏幕 */
@media (max-width: 1200px) {
    .cyberpunk-control-wrapper {
        gap: 6px;
    }

    .cyberpunk-number-input {
        width: 70px;
        min-width: 70px;
        font-size: 12px;
    }

    .cyberpunk-unit {
        font-size: 11px;
        min-width: 18px;
    }

    .cyberpunk-reset-btn {
        width: 28px;
        height: 28px;
        min-width: 28px;
        font-size: 12px;
    }

    .cyberpunk-control-group:has(.cyberpunk-reset-btn) .cyberpunk-control-wrapper {
        padding-right: 36px;
    }
}

/* 移动端或极小屏幕 */
@media (max-width: 1000px) {
    .cyberpunk-control-group {
        padding: 8px;
        gap: 6px;
    }

    .cyberpunk-control-wrapper {
        gap: 8px;
        /* 增加间距，因为没有滑块了 */
        justify-content: center;
    }

    .cyberpunk-number-input {
        width: 65px;
        min-width: 65px;
    }

    .cyberpunk-unit {
        min-width: 15px;
    }

    .cyberpunk-reset-btn {
        position: absolute !important;
        /* 保持绝对定位 */
        top: 8px !important;
        right: 8px !important;
        width: 24px;
        height: 24px;
        min-width: 24px;
    }

    .cyberpunk-control-group:has(.cyberpunk-reset-btn) .cyberpunk-control-wrapper {
        padding-right: 32px;
        /* 为重置按钮留出空间 */
    }

    .cyberpunk-select {
        min-width: 0 !important;
        font-size: 13px !important;
    }

    .cyberpunk-config-details {
        grid-template-columns: 1fr;
        gap: 10px;
    }

    .cyberpunk-config-item {
        flex-direction: row;
        justify-content: space-between;
    }
}

/* 特别小的屏幕 (手机横屏等) */
@media (max-width: 800px) {
    .cyberpunk-control-group {
        padding: 6px;
    }

    .cyberpunk-control-label {
        font-size: 13px;
    }

    .cyberpunk-number-input {
        width: 60px;
        min-width: 60px;
        max-width: 65px;
        padding: 4px 6px;
    }

    .cyberpunk-reset-btn {
        width: 20px;
        height: 20px;
        min-width: 20px;
        font-size: 10px;
    }

    .cyberpunk-unit {
        font-size: 10px;
        min-width: 12px;
    }
}

/* 超小屏幕紧凑模式 (< 600px) */
@media (max-width: 600px) {
    .cyberpunk-control-group {
        padding: 4px;
        gap: 6px;
    }

    .cyberpunk-control-wrapper {
        justify-content: space-between;
        align-items: center;
        gap: 6px;
    }

    .cyberpunk-number-input {
        width: 55px;
        min-width: 55px;
        max-width: 60px;
    }

    .cyberpunk-unit {
        text-align: center;
    }

    .cyberpunk-reset-btn {
        position: absolute !important;
        /* 强制保持绝对定位 */
        top: 8px !important;
        right: 8px !important;
        align-self: auto !important;
    }

    .cyberpunk-control-group:has(.cyberpunk-reset-btn) .cyberpunk-control-wrapper {
        padding-right: 40px;
        /* 为重置按钮留出空间 */
    }
}

/* 为Tyrell主题特别优化 */
body.cp2027-layout-tyrell #cyberpunk2027-theme-settings {
    max-width: 100%;
    margin-right: 0;
    padding-right: 0;
}

body.cp2027-layout-tyrell .cyberpunk-control-group {
    margin-left: 0;
    margin-right: 0;
    max-width: 100%;
}

body.cp2027-layout-tyrell .cyberpunk-control-wrapper {
    max-width: 100%;
    overflow: hidden;
}

/* 确保在窄侧边栏中的适配 */
@media (max-width: 1600px) {
    body.cp2027-layout-tyrell .cyberpunk-control-wrapper {
        gap: 6px;
        justify-content: center;
    }

    body.cp2027-layout-tyrell .cyberpunk-number-input {
        width: 60px;
        min-width: 60px;
        max-width: 65px;
    }
}

/* ---------------------------------------------------------------------
|  6.2 VIDEO BACKGROUND SYSTEM
'--------------------------------------------------------------------- */

/* Override ST system background z-index to make room for our background layers */
body.cp2027-active #bg1 {
    z-index: -1000 !important;
}

body.cp2027-active #bg_custom {
    z-index: -999 !important;
}

/* Video background - lowest layer in our system (-100) */
#cyberpunk_video_bg {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    object-fit: cover !important;
    z-index: -100 !important;
    opacity: 1 !important;
    pointer-events: none !important;
    transition: opacity 0.5s ease-in-out !important;
    background-color: #000 !important;
}

#cyberpunk_video_bg.fade-in {
    opacity: 1 !important;
}

#cyberpunk_video_bg.fade-out {
    opacity: 0 !important;
}

/* Background layer hierarchy (from bottom to top):
   -1000: ST #bg1 (global background)
   -999:  ST #bg_custom (chat background)
   -100:  Cyberpunk video background
   -2:    Cyberpunk AI background
   0:     Cyberpunk character background
*/

body.cp2027-active #cyberpunk_ai_bg {
    z-index: -2 !important;
}

body.cp2027-active #cyberpunk_bg {
    z-index: 0 !important;
}

/* Responsive video background for different layouts */
body.cp2027-active.cp2027-layout-tyrell #cyberpunk_video_bg,
body.cp2027-active.cp2027-layout-decker #cyberpunk_video_bg {
    width: 100vw !important;
    height: 100vh !important;
}

/* ---------------------------------------------------------------------
|  6.3 INPUT AREA & FORMS
'--------------------------------------------------------------------- */

body.cp2027-active #chat_wrapper {
    padding: 20px;
}

body.cp2027-active .mes_inner {
    background: var(--SmartThemeChatTintColor);
    border: 1px solid var(--cp2027-border-color);
    border-radius: 8px;
    backdrop-filter: blur(5px);
}

body.cp2027-active .mes .name {
    color: var(--cp2027-primary);
    font-weight: bold;
    text-shadow: var(--cp2027-glow-primary);
}

body.cp2027-active .mes.user_mes {
    border-left-color: var(--cp2027-secondary);
}

body.cp2027-active .mes.user_mes .avatar {
    border-color: var(--cp2027-secondary);
    box-shadow: 0 0 5px var(--cp2027-secondary), 0 0 10px var(--cp2027-secondary);
}

body.cp2027-active .mes.user_mes .name {
    color: var(--cp2027-secondary);
    text-shadow: 0 0 5px var(--cp2027-secondary), 0 0 10px var(--cp2027-secondary);
}

body.cp2027-active #send_form {
    background: var(--SmartThemeBlurTintColor);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid var(--cp2027-border-color);
    border-radius: 8px;
    box-shadow: 0 0 20px var(--cp2027-shadow-color);
    transition: var(--cp2027-transition-medium);
}

body.cp2027-active #send_textarea {
    background: transparent;
    color: var(--cp2027-text-primary);
}

body.cp2027-active #send_but,
body.cp2027-active #impersonate_button {
    background: var(--cp2027-primary);
    color: var(--cp2027-bg-dark);
    border: none;
    border-radius: 5px;
    transition: var(--cp2027-transition-fast);
}

body.cp2027-active #send_but:hover,
body.cp2027-active #impersonate_button:hover {
    box-shadow: var(--cp2027-glow-primary);
    transform: scale(1.05);
}

/* ---------------------------------------------------------------------
|  6.4 ANIMATIONS & EFFECTS
'--------------------------------------------------------------------- */

@keyframes message-fade-in {
    from {
        opacity: 0;
        transform: translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

body.cp2027-active .menu_button:hover {
    color: var(--cp2027-primary);
    text-shadow: var(--cp2027-glow-primary);
    transform: scale(1.05);
    transition: var(--cp2027-transition-fast);
}

/* =====================================================================
|  END OF CYBERPUNK 2027 THEME
'===================================================================== */

/* 自定义欢迎页标题样式 */
body.cp2027-active .mytitle {
    position: relative;
    animation: rgb-shift 2s ease-in-out infinite;
    font-size: calc(var(--mainFontSize) * 1.4);
    font-weight: 400;
    font-family: var(--cp2027-font-cyberpunk);
}

@keyframes rgb-shift {

    0%,
    100% {
        text-shadow:
            0 0 5px #00ffdd,
            1px 0 0 #ff0040,
            -1px 0 0 #00ffff;
    }

    25% {
        text-shadow:
            0 0 8px #00ffdd,
            1.5px 0 0 #ff0040,
            -1.5px 0 0 #00ffff;
    }

    50% {
        text-shadow:
            0 0 12px #00ffdd,
            0.7px 0 0 #ff0040,
            -0.7px 0 0 #00ffff;
    }

    75% {
        text-shadow:
            0 0 15px #00ffdd,
            2px 0 0 #ff0040,
            -2px 0 0 #00ffff;
    }
}

/* =====================================================================
|  AI背景图像资源管理界面响应式样式
'===================================================================== */

/* 资源管理界面基础样式 */
.cyberpunk-resource-manager {
    font-family: var(--cp2027-font-primary);
    color: #e0f0ff;
    box-sizing: border-box;
    width: auto;
    max-width: 800px;
}

/* 小屏幕适配 */
@media (max-width: 1000px) {
    .cyberpunk-resource-manager {
        left: 10px !important;
        right: 10px !important;
        top: 10px !important;
        max-width: none !important;
        padding: 15px !important;
    }

    .cyberpunk-resource-manager h3 {
        font-size: 16px !important;
        margin: 0 0 15px 0 !important;
    }

    .cyberpunk-resource-manager button {
        padding: 8px 12px !important;
        font-size: 13px !important;
    }

    .cyberpunk-resource-manager #summary {
        padding: 10px !important;
    }

    .cyberpunk-resource-manager #summary>div {
        grid-template-columns: 1fr 1fr !important;
        gap: 10px !important;
        font-size: 13px !important;
    }

    .cyberpunk-resource-manager #unused-images-list {
        max-height: 250px !important;
    }

    .cyberpunk-resource-manager #unused-images-list>div {
        padding: 6px 8px !important;
        font-size: 12px !important;
    }
    body.cp2027-active .mytitle {
        font-size: calc(var(--mainFontSize) * 1);
        text-align: center;
        margin-bottom: 20px;
    }
}

/* 超小屏幕适配 */
@media (max-width: 600px) {
    .cyberpunk-resource-manager {
        left: 5px !important;
        right: 5px !important;
        padding: 10px !important;
    }

    .cyberpunk-resource-manager #summary>div {
        grid-template-columns: 1fr !important;
        gap: 8px !important;
    }

    .cyberpunk-resource-manager #unused-images-list {
        max-height: 200px !important;
    }

    .cyberpunk-resource-manager button {
        padding: 6px 8px !important;
        font-size: 12px !important;
        margin-right: 5px !important;
    }
        body.cp2027-active .mytitle {
        font-size: calc(var(--mainFontSize) * 1.1);
        text-align: left;
        margin-bottom: 40px;
        font-weight: 700;

    }
    body.cp2027-active .welcomePanel .welcomeShortcuts{
        display: none !important;
    }
}
